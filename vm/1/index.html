<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=1024, user-scalable=no">

  <title>Your deck.js Presentation</title>

  <!-- Required stylesheet -->
  <link rel="stylesheet" media="screen" href="core/deck.core.css">

  <!-- Extension CSS files go here. Remove or add as needed. -->
  <link rel="stylesheet" media="screen" href="extensions/goto/deck.goto.css">
  <link rel="stylesheet" media="screen" href="extensions/menu/deck.menu.css">
  <link rel="stylesheet" media="screen" href="extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" media="screen" href="extensions/status/deck.status.css">
  <link rel="stylesheet" media="screen" href="extensions/scale/deck.scale.css">

  <!-- Style theme. More available in /themes/style/ or create your own. -->
  <link rel="stylesheet" media="screen" href="themes/style/web-2.0.css">

  <!-- Transition theme. More available in /themes/transition/ or create your own. -->
  <link rel="stylesheet" media="screen" href="themes/transition/horizontal-slide.css">

  <!-- Basic black and white print styles -->
  <link rel="stylesheet" media="print" href="core/print.css">

  <!-- Required Modernizr file -->
  <script src="modernizr.custom.js"></script>
</head>
<body>
  <div class="deck-container">

    <!-- Begin slides. Just make elements with a class of slide. -->

    <section class="slide">
      <h1>Bytecode VMs</h1>
      
    </section>

    <section class="slide">
      <h2>Rough kinds</h2>
      <ul>
        <li>For a specific language</li>
        <li>As a layer of an application or part of an API</li>
        <li>'General' runtimes</li>
      </ul>
    </section>

    <section class="slide">
      <h2>For a specific language</h2>
      <ul>
        <li>Most famous early examples: Smalltalk, Lisp and Self all had early bytecode VMs. Pascal p-code, and Forth interpreters.</li>
        <li>Java JVM (initially), Python CPython, Ruby MRI/Rubinius, Perl, Lua, Flash Tamarin, JS V8 etc, even PHP (kindof)</li>
        <li>(Usually) an evolution, after starting as (usually) an AST walking interpreter</li>
        <li>Better risk/reward than writing a compiler that targets raw machine code</li>
        <li>Sometimes you have other baggage as well, such as image based VMs.</li>
      </ul>
    </section>

    <section class="slide">
      <h2>As a layer of an application or part of an API</h2>
      <ul>
        <li>Z-machine (Infocom) <div class="slide"> For portability</div></li>
        <li>The Lost Vikings <div class="slide"> To fit in memory</div></li>
        <li>JS template rendering library '<a href="https://www.linkedin.com/pulse/glimmers-optimizing-compiler-chad-hietala/">Glimmer</a>' <div class="slide"> Diffing, speed, wire size</div></li>
      </ul>
    </section>

    <section class="slide">
      <h2>As a layer of an application or part of an API</h2>
      <ul>
        <li>I wrote an opengl based UI toolkit which was mostly a bytecode VM whose bytecodes were rendering tasks</li>
        <li>In fact, lots of rendering middleware uses this approach - Apple's Metal APIs, for example.</li>
        <li>SPIRV for Vulkan is even more this.</li>
      </ul>
    </section>

    <section class="slide">
      <h2>As a layer of an application or part of an API</h2>
      <p>If you are familiar with the literature, you can end up building out Jitting infrastructure, GC, OSR, Deopt, multithreading, tuning parameters, stack layout optimisation, playing with instruction encoding for code density, macroinstructions, polymorphic inline caches, dynamic recompilation...</p>
    </section>

    <section class="slide">
      <h2>'General' runtimes</h2>
      <ul>
        <li>JVMs - OpenJDK, j9, Hotspot etc</li>
        <li>CLR, Parrot</li>
        <li>Qbrt</li>
        <li>Truffle/Graal, OMR, ZetaVM, Rubinius, PyPy, Mu VM...</li>
        <li>Dis</li>
      </ul>
    </section>

    <section class="slide">
      <h2>Conclusion?</h2>
      <blockquote> Parsing is an example of a 'solved enough' problem. There is still a lot of interesting work, but for most things you can just use a parser combinator library or write a PEG and run that through a code generator. Very few of things you end up wanting in practical VM writing are 'solved enough' problems. </blockquote>
    </section>

    <section class="slide">
      <h2> Conclusion??? </h2>
      <p> We are reimplementing things again and again and again. Many foundational projects are MLOC balls of C++. The cost to implement some of these things is astronomical. It takes a number of cycles for things to make it into the mainstream.</p>
      <p> There are things in the Self and Strongtalk VMs that we still have trouble implementing in smaller projects today. </p>
    </section>

    <!-- End slides. -->

    <!-- Begin extension snippets. Add or remove as needed. -->

    <!-- deck.navigation snippet -->
    <div aria-role="navigation">
      <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
      <a href="#" class="deck-next-link" title="Next">&#8594;</a>
    </div>

    <!-- deck.status snippet -->
    <p class="deck-status" aria-role="status">
      <span class="deck-status-current"></span>
      /
      <span class="deck-status-total"></span>
    </p>

    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
      <label for="goto-slide">Go to slide:</label>
      <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
      <datalist id="goto-datalist"></datalist>
      <input type="submit" value="Go">
    </form>

    <!-- End extension snippets. -->
  </div>

<!-- Required JS files. -->
<script src="jquery.min.js"></script>
<script src="core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
  $(function() {
    $.deck('.slide');
  });
</script>
</body>
</html>
